<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Track Your Calories!</title>
  <link rel="stylesheet" href="public/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dosis:500,700">
</head>
<body>
  <header>
    <h2>Track Your Calories!</h2>
  </header>
  <main id="health-tracker-app">
    <label for="searchbar" class="search-prompt">Search for foods you eat...</label>
    <div class="searchbar-wrapper">
      <input id="searchbar" class="searchbar" type="text" list="auto-results" autofocus>
      <div id="search-button" class="search-button"></div>
    </div>
    <datalist id="auto-results">
      <!-- Options from Nutritionix autocomplete API will be loaded here. -->
      <!-- Looks like Safari can't support datalist.. so sad! :( Oh well. -->
      <!-- http://caniuse.com/#feat=datalist -->
    </datalist>
    <div id="search-results" class="search-results">
      <!-- Results from Nutritionix search API will be loaded here. -->
    </div>
  </main>
  <footer>
    <p>Powered by <a href="http://www.nutritionix.com/api" target="_blank">Nutritionix API</a>.</p>
  </footer>

  <script type="text/template" id="search-result-template">
    <h3 class="search-result-title"><%= item_name %></h3>
    <img class="search-result-thumbnail"
         src="<%= thumbnail %>"
         alt="<%= item_name %><%= brand_name ? ' from' + brand_name : '' %>">
    <div class="search-result-description">
      <% if(brand_name) { %>
        <div>
          <span><strong>Brand: </strong></span>
          <span><%= brand_name %></span>
        </div>
      <% } %>
      <% if(nutrient_value && nutrient_uom === 'kcal') { %>
        <div>
          <span><strong>Calories: </strong></span>
          <span><%= nutrient_value %></span>
        </div>
      <% } %>
      <% if(serving_qty) { %>
        <div>
          <span><strong>Serving size: </strong></span>
          <span><%= serving_qty %> <%= serving_uom %></span>
        </div>
      <% } %>
      <div>
        <span class="track-food-button <%= isTracking ? 'tracked' : 'untracked' %>">
          <strong><%= isTracking ? 'Tracking:'  : 'Track this food' %></strong>
        </span>
        <% if(isTracking) { %>
          <span><%= weekCalCount %> Cal in last week</span>
        <% } %>
      </div>
    </div>
  </script>

  <script type="text/template" id="food-list-item-template">
    // TODO: implement view slightly different than search-result-template
    // for already-tracked food items
  </script>

  <script type="text/template" id="timeline-view-template">
    // TODO: implement timeline view (find library?) showing
    // Calorie consumption over time
  </script>

  <script src="public/main.js"></script>
</body>
</html>